import{r as l,j as e,H as b,L as N,a as y}from"./app-CCuBXyND.js";import{A as v}from"./AppLayout-Cq2YgjRo.js";import{F as u}from"./ClockIcon-CrN5xoQm.js";function w({title:a,titleId:n,...s},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const h=l.forwardRef(w);function k({title:a,titleId:n,...s},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const _=l.forwardRef(k);function V({title:a,titleId:n,...s},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},s),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const g=l.forwardRef(V);function L({balance:a,recentWithdrawals:n,userPermissions:s}){const[r,x]=l.useState({type:"",amount:"",notes:""}),[f,i]=l.useState(!1),c=t=>Math.round(Number(t)).toLocaleString("ar-IQ")+" د.ع",p=t=>new Date(t).toLocaleDateString("ar-IQ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=t=>{t.preventDefault(),y.post("/balance/withdraw",r,{onSuccess:()=>{x({type:"",amount:"",notes:""}),i(!1)}})},m=t=>{x({...r,type:t}),i(!0)},o=t=>({capital:"رأس المال",mustafa_profit:"أرباح مصطفى",donia_profit:"أرباح دنيا"})[t]||t,d=()=>s.canViewAllBalances?n:n.filter(t=>t.type==="donia_profit");return e.jsxs(v,{children:[e.jsx(b,{title:"الأرصدة"}),e.jsx("div",{className:"py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"نظام الأرصدة"}),e.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-600",children:"إدارة الأرصدة الحالية والسحوبات"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[s.canViewCapitalBalance&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-blue-900 truncate",children:"رصيد رأس المال"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-600 break-all",children:c(a.capital_balance)}),s.canWithdrawCapital&&e.jsxs("button",{onClick:()=>m("capital"),className:"mt-2 w-full sm:w-auto bg-blue-600 text-white px-3 py-2 rounded-md text-xs sm:text-sm hover:bg-blue-700 transition-colors",children:[e.jsx(h,{className:"h-3 w-3 sm:h-4 sm:w-4 inline ml-1"}),"سحب"]})]})]})}),s.canViewMustafaBalance&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-green-900 truncate",children:"رصيد مصطفى"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-green-600 break-all",children:c(a.mustafa_balance)}),s.canWithdrawMustafaProfit&&e.jsxs("button",{onClick:()=>m("mustafa_profit"),className:"mt-2 w-full sm:w-auto bg-green-600 text-white px-3 py-2 rounded-md text-xs sm:text-sm hover:bg-green-700 transition-colors",children:[e.jsx(h,{className:"h-3 w-3 sm:h-4 sm:w-4 inline ml-1"}),"سحب"]})]})]})}),s.canViewDoniaBalance&&e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-purple-900 truncate",children:"رصيد دنيا"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-purple-600 break-all",children:c(a.donia_balance)}),s.canWithdrawDoniaProfit&&e.jsxs("button",{onClick:()=>m("donia_profit"),className:"mt-2 w-full sm:w-auto bg-purple-600 text-white px-3 py-2 rounded-md text-xs sm:text-sm hover:bg-purple-700 transition-colors",children:[e.jsx(h,{className:"h-3 w-3 sm:h-4 sm:w-4 inline ml-1"}),"سحب"]})]})]})})]}),s.canViewAllBalances&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"الإحصائيات الإجمالية (عبر التاريخ)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.canViewCapitalBalance&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"إجمالي رأس المال"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:c(a.total_capital_all_time)})]}),s.canViewMustafaBalance&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"إجمالي أرباح مصطفى"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:c(a.total_mustafa_all_time)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"إجمالي أرباح دنيا"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:c(a.total_donia_all_time)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"إجمالي الأرباح"}),e.jsx("p",{className:"text-lg font-bold text-gray-800",children:c(a.total_profit_all_time)})]})]})]}),!s.canViewAllBalances&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"إحصائياتك الشخصية"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"إجمالي أرباحك عبر التاريخ"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c(a.total_donia_all_time)})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(u,{className:"h-5 w-5 sm:h-6 sm:w-6 ml-2"}),s.canViewAllBalances?"آخر السحوبات":"سحوباتك الأخيرة"]}),d().length>0&&e.jsx(N,{href:"/balance/withdrawals",className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"عرض الكل"})]})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المستخدم"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المبلغ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الملاحظات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d().length>0?d().map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:p(t.created_at)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:t.user.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:o(t.type)}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-red-600",children:["-",c(t.amount)]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:t.notes||"-"})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500",children:"لا توجد سحوبات حتى الآن"})})})]})}),e.jsx("div",{className:"md:hidden",children:d().length>0?e.jsx("div",{className:"divide-y divide-gray-200",children:d().map(t=>e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.user.name}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:o(t.type)})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p(t.created_at)})]}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{className:"text-lg font-bold text-red-600",children:["-",c(t.amount)]})})]}),t.notes&&e.jsxs("div",{className:"bg-gray-50 rounded-md p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium mb-1",children:"الملاحظات:"}),e.jsx("p",{className:"text-sm text-gray-800",children:t.notes})]})]},t.id))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(u,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد سحوبات حتى الآن"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:s.canViewAllBalances?"لم يتم تسجيل أي عمليات سحب حتى الآن":"لم تقومي بأي عمليات سحب حتى الآن"}),e.jsx("p",{className:"text-xs text-gray-400",children:"يمكنك سحب رصيدك باستخدام أزرار السحب أعلاه"})]})})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 p-4",children:e.jsx("div",{className:"relative top-4 sm:top-20 mx-auto p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 text-center mb-4",children:["سحب ",o(r.type)]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المبلغ"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,value:r.amount,onChange:t=>x({...r,amount:t.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-3 text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل المبلغ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الملاحظات (اختياري)"}),e.jsx("textarea",{value:r.notes,onChange:t=>x({...r,notes:t.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-3 text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"أدخل ملاحظات إضافية..."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[e.jsx("button",{type:"submit",className:"w-full sm:flex-1 bg-red-600 text-white px-4 py-3 rounded-md hover:bg-red-700 font-medium transition-colors",children:"تأكيد السحب"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"w-full sm:flex-1 bg-gray-500 text-white px-4 py-3 rounded-md hover:bg-gray-600 font-medium transition-colors",children:"إلغاء"})]})]})]})})})]})}export{L as default};
