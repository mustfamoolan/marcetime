import{r,u as M,j as e,H as F,L as P}from"./app-DHwXSQtM.js";import{A as B}from"./AppLayout-BhLdE5X6.js";function W({debts:N=[],summary:i={}}){const[j,v]=r.useState(""),[d,y]=r.useState("all"),[w,c]=r.useState(!1),[t,x]=r.useState(null),[f,I]=r.useState(N),[a,k]=r.useState(()=>typeof window<"u"?localStorage.getItem("hidePaidDebts")==="true":!1),{data:m,setData:o,post:_,processing:p,errors:b,reset:u}=M({amount:"",notes:""});r.useEffect(()=>{typeof window<"u"&&localStorage.setItem("hidePaidDebts",a.toString())},[a]);const h=f.filter(s=>{const l=s.customer_name.toLowerCase().includes(j.toLowerCase()),g=d==="all"||d==="active"&&s.remaining_amount>0||d==="paid"&&s.remaining_amount===0,D=!a||parseFloat(s.remaining_amount)>.01;return l&&g&&D}),n=s=>new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0}).format(s),S=s=>{s.preventDefault(),console.log("Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø³Ø¯Ø§Ø¯:",t.id,m),_(`/debts/${t.id}/payment`,m,{onSuccess:()=>{console.log("ØªÙ… Ø§Ù„Ø³Ø¯Ø§Ø¯ Ø¨Ù†Ø¬Ø§Ø­"),u(),c(!1),x(null),setTimeout(()=>{window.location.reload()},500)},onError:l=>{console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø³Ø¯Ø§Ø¯:",l),alert("Ø­Ø¯Ø« Ø®Ø·Ø£: "+JSON.stringify(l))}})},L=s=>{x(s),c(!0),o("amount",s.remaining_amount.toString())},C=s=>{const l=parseFloat(s.remaining_amount)||0,g=parseFloat(s.paid_amount)||0;return l<=0||l<.01?e.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-green-100 text-green-800 rounded-full",children:"Ù…Ø³Ø¯Ø¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„"}):g>0?e.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:"Ù…Ø³Ø¯Ø¯ Ø¬Ø²Ø¦ÙŠØ§Ù‹"}):e.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-red-100 text-red-800 rounded-full",children:"Ù…Ø³ØªØ­Ù‚"})};return e.jsxs(B,{children:[e.jsx(F,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-4 sm:py-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{href:route("dashboard"),className:"inline-flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©"})]})]})})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:n(i.total_outstanding||0)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.outstanding_count||0," Ø¯ÙŠÙ†"]})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø­ØµÙ„"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:n(i.total_paid||0)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.paid_count||0," Ø¯ÙØ¹Ø©"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙˆÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n(i.total_amount||0)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.total_count||0," Ø¯ÙŠÙ†"]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„...",value:j,onChange:s=>v(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs("select",{value:d,onChange:s=>y(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙŠÙˆÙ†"}),e.jsx("option",{value:"active",children:"Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©"}),e.jsx("option",{value:"paid",children:"Ø§Ù„Ù…Ø³Ø¯Ø¯Ø©"})]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>k(!a),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${a?"bg-gray-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{className:"text-sm",children:"ðŸ‘ï¸"}),e.jsx("span",{className:"text-sm",children:a?"Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø³Ø¯Ø¯Ø©":"Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø³Ø¯Ø¯Ø©"})]}),a&&e.jsx("span",{className:"text-xs text-gray-500",children:"Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ù…Ø³Ø¯Ø¯Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø®ÙÙŠØ©"})]})]})})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Ø¹Ø±Ø¶ ",h.length," Ù…Ù† ",f.length," Ø¯ÙŠÙ†",a&&e.jsx("span",{className:"text-xs text-orange-600 mr-2",children:"(Ø§Ù„Ù…Ø³Ø¯Ø¯Ø© Ù…Ø®ÙÙŠØ©)"})]})]}),h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙŠÙˆÙ†"})]}):e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:s.customer_name}),C(s)]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙ†:"}),e.jsx("span",{className:"font-bold text-blue-600",children:n(s.total_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…Ø¯ÙÙˆØ¹:"}),e.jsx("span",{className:"font-bold text-green-600",children:n(s.paid_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:"}),e.jsx("span",{className:"font-bold text-red-600",children:n(s.remaining_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®:"}),e.jsx("span",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString("ar-EG")})]})]}),parseFloat(s.remaining_amount)>.01&&e.jsx("button",{onClick:()=>L(s),className:"w-full mt-3 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold transition-colors",children:"Ø³Ø¯Ø§Ø¯ Ø¯ÙØ¹Ø©"})]})},s.id))})]})})]})]}),w&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-sm",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Ø³Ø¯Ø§Ø¯ Ø¯ÙŠÙ†"}),e.jsx("button",{onClick:()=>{c(!1),x(null),u()},className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-2",children:t.customer_name}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙ†:"}),e.jsx("span",{className:"font-bold text-blue-600",children:n(t.total_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:"}),e.jsx("span",{className:"font-bold text-red-600",children:n(t.remaining_amount)})]})]})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø±Ø§Ø¯ Ø³Ø¯Ø§Ø¯Ù‡"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:t.remaining_amount,value:m.amount,onChange:s=>o("amount",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0}),b.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.amount})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>o("amount",(t.remaining_amount/2).toString()),className:"flex-1 py-2 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Ù†ØµÙ Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("button",{type:"button",onClick:()=>o("amount",t.remaining_amount.toString()),className:"flex-1 py-2 text-sm bg-green-100 text-green-700 rounded hover:bg-green-200",children:"ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø¨Ù„Øº"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("textarea",{rows:2,value:m.notes,onChange:s=>o("notes",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),x(null),u()},className:"flex-1 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold disabled:opacity-50",children:p?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø³Ø¯Ø§Ø¯...":"ØªØ£ÙƒÙŠØ¯"})]})]})]})})})]})}export{W as default};
