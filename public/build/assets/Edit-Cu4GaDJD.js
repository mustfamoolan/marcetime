import{u as y,r as N,j as e,H as v}from"./app-BsVf6_Q7.js";import{A as w}from"./AppLayout-CpyaWvdG.js";function C({product:a}){const{data:t,setData:l,post:p,processing:d,errors:r}=y({name:a.name||"",description:a.description||"",purchase_price:a.purchase_price||"",marketing_cost:a.marketing_cost||1e3,selling_price:a.selling_price||"",quantity:a.quantity||"",image:null,_method:"PUT"}),[g,h]=N.useState(a.image_url||null),o=s=>new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0}).format(s),b=()=>{const s=parseFloat(t.purchase_price)||0,n=parseFloat(t.marketing_cost)||0,c=parseFloat(t.selling_price)||0,x=s+n;return c-x},j=s=>{const n=s.target.files[0];if(n){l("image",n);const c=new FileReader;c.onload=x=>{h(x.target.result)},c.readAsDataURL(n)}},f=s=>{s.preventDefault(),p(route("products.update",a.id))},i=b(),m=(parseFloat(t.purchase_price)||0)+(parseFloat(t.marketing_cost)||0),u=m>0?i/m*100:0;return e.jsxs(w,{children:[e.jsx(v,{title:`تعديل المنتج - ${a.name}`}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"تعديل المنتج"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"قم بتعديل معلومات المنتج أدناه"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"المعلومات الأساسية"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المنتج *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>l("name",s.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسم المنتج"}),r.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),e.jsx("textarea",{value:t.description,onChange:s=>l("description",s.target.value),rows:"3",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل وصف المنتج (اختياري)"}),r.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الكمية *"}),e.jsx("input",{type:"number",min:"0",value:t.quantity,onChange:s=>l("quantity",s.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"}),r.quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.quantity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة المنتج"}),e.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.image&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.image}),g&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:g,alt:"معاينة الصورة",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"})})]})]})]}),e.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"معلومات التسعير"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الشراء (دينار) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:t.purchase_price,onChange:s=>l("purchase_price",s.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"}),r.purchase_price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.purchase_price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلفة التسويق (دينار) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:t.marketing_cost,onChange:s=>l("marketing_cost",s.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1000.00"}),r.marketing_cost&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.marketing_cost})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر البيع (دينار) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:t.selling_price,onChange:s=>l("selling_price",s.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"}),r.selling_price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.selling_price})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"حسابات الربح"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"إجمالي التكلفة"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:o(m)})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"سعر البيع"}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:o(parseFloat(t.selling_price)||0)})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"ربح الوحدة"}),e.jsx("div",{className:`text-lg font-bold ${i>=0?"text-green-600":"text-red-600"}`,children:o(i)})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"نسبة الربح"}),e.jsxs("div",{className:`text-lg font-bold ${u>=0?"text-green-600":"text-red-600"}`,children:[u.toFixed(1),"%"]})]})]}),i<0&&e.jsx("div",{className:"mt-4 p-3 bg-red-100 border border-red-300 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 18.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"font-medium",children:"تحذير: سعر البيع أقل من إجمالي التكلفة (خسارة)"})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-3 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg transition-colors",children:"إلغاء"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[d&&e.jsx("svg",{className:"animate-spin w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d?"جاري الحفظ...":"حفظ التعديلات"]})]})]})]})]})}export{C as default};
